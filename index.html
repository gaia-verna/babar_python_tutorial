<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Better Analysis Workflow with [I]Python : @Babar Collaboration Meeting Jan 2013" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <link rel="stylesheet" type="test/css" media="screen" href="stylesheets/jquery.lightbox-0.5.css">
    <style>
    .material {background-color:#DDDDDD;}
    .setupinst{background-color:#E0E0E0;-moz-border-radius: 5px;border-radius: 5px;padding:5px;}
    img.thumb:hover{
        background-color:#CCCCCC;
    }
    pre {
    width:97%;
 white-space: pre-wrap;       /* css-3 */
 white-space: -moz-pre-wrap;  /* Mozilla */
 white-space: -pre-wrap;      /* Opera 4-6 */
 white-space: -o-pre-wrap;    /* Opera 7 */
 word-wrap: break-word;       /* Internet Explorer 5.5+ */
}
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="javascripts/jquery.lightbox-0.5.min.js"></script>
    <title>Better Analysis Workflow with [I]Python</title>
  </head>

  <body>
    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/piti118/babar_python_tutorial">View on GitHub</a>
          <h1 id="project_title">Better Analysis Workflow with [I]Python</h1>
          <h2 id="project_tagline">@<em>BaBar</em> Collaboration Meeting Jan 2013
            <br><span style="font-size:70%">
            Thursday 31st Jan 2013 8:30am-12:30pm(1 day AFTER Collaboration Meeting)
            </span>
            <br><span style="font-size:55%">
            by Piti Ongmongkolkul and Chih-hsiang Cheng
            </span>
            </h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/piti118/babar_python_tutorial/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/piti118/babar_python_tutorial/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>Introduction</h3>

<p> <a href="http://www.python.org/">Python</a> is a very
<a href="http://en.wikipedia.org/wiki/Comparison_of_programming_languages#Expressiveness">
expressive</a> language which means you type less to do more. We have been
using Python for our analysis for more than a year. Interactive
environment provided by <a href="http://ipython.org">IPython</a> couples with
<a href="http://matplotlib.org/">matplotlib</a>
allows us to make beautiful plots with quick turnaround. Analysis Tools can
take full advantage Python's introspection capability. This enables us to think
less about how to get the tools to do what we want
and focus more on the analysis. In this tutorial we will be covering
how to perform various analysis procedures typically done after skimming process with
IPython. Take a look at our <a href="https://github.com/piti118/babar_python_tutorial/blob/master/presentation/slides.pdf?raw=true">advertisement slides</a>
for why we think IPython will make life easier.
</p>

<h3>Location and Time</h3>

<p>Somewhere at SLAC. There will be 2 sessions. The tutorial session will be on
the day <strong>AFTER</strong> the collaboration meeting.
So make sure you book your flight for an extra day (leaving on Thursday afternoon
or Friday).</p>
<ul>
<li>
    <strong>Setup Session</strong>. One hour long session on Monday Jan 28 2013 12:20pm-13:20pm to
    help you set your laptop with necessary tools. Preparation instruction
    is given <a href="#setup">here</a>. It is recommended that you try to follow
    to follow instruction before coming to the session. If there is any problem
    with installation, come to this session for help</li>
<li>
    <strong>Tutorial Session</strong> Three hour long tutorial seesion on Thursday 31st Jan 2013 8:30am-12:30pm,
    the day right <strong>AFTER</strong> the collaboration meeting. Remember to book your plane ticket
    for an extra day.</li>
</ul>

<h3>Topics</h3>

<ul>
    <li>Overview<span class="material">[<a href="http://nbviewer.ipython.org/urls/raw.github.com/piti118/babar_python_tutorial/master/notebooks/00_Overview.ipynb">HTML</a>][<a href="https://raw.github.com/piti118/babar_python_tutorial/master/notebooks/00_Overview.ipynb">ipynb</a>]</span></li>
    <li>Basic Python.
      <span class="material">
      [<a href="http://nbviewer.ipython.org/urls/raw.github.com/piti118/babar_python_tutorial/master/notebooks/01_Basic_Python.ipynb">HTML</a>]
      [<a href="https://raw.github.com/piti118/babar_python_tutorial/master/notebooks/01_Basic_Python.ipynb">.ipynb</a>]</span></li>
    <li>Read Root File with <a href="http://rootpy.github.com/root_numpy/">root_numpy</a>
        and making pretty plots with <a href="http://matplotlib.org">matplotlib</a>.
        <span class="material">
        [<a class="material" href="http://nbviewer.ipython.org/urls/raw.github.com/piti118/babar_python_tutorial/master/notebooks/02_Read_And_Plot.ipynb">HTML</a>]
        [<a class="material" href="https://raw.github.com/piti118/babar_python_tutorial/master/notebooks/02_Read_And_Plot.ipynb">.ipynb</a>]
        </span>
        </li>
    <li>Multivariate analysis using <a href="http://scikit-learn.org">scikit-learn</a>.
        <span class="material">
        [<a href="http://nbviewer.ipython.org/urls/raw.github.com/piti118/babar_python_tutorial/master/notebooks/03_Multivariate_Analysis.ipynb">HTML</a>]
        [<a href="https://raw.github.com/piti118/babar_python_tutorial/master/notebooks/03_Multivariate_Analysis.ipynb">.ipynb</a>]
        </span>
    </li>
    <li>Fit using <a href="https://github.com/iminuit/iminuit">iminuit</a>
    and <a href="https://github.com/iminuit/probfit">probfit</a>.
        <span class="material">
        [<a href="http://nbviewer.ipython.org/urls/raw.github.com/piti118/babar_python_tutorial/master/notebooks/04_Fitting.ipynb">HTML</a>]
        [<a href="https://raw.github.com/piti118/babar_python_tutorial/master/notebooks/04_Fitting.ipynb">.ipynb</a>]</span></li>
</ul>
<a class="lb" href="images/screenshot.png"><img class="thumb" style="width:100px;" src="images/screenshot.png"/></a>
<a class="lb" href="images/r2all.png"><img class="thumb" style="width:100px;" src="images/r2all.png"/></a>
<a class="lb" href="images/scikit.png"><img class="thumb" style="width:200px;" src="images/scikit.png"/></a>
<a class="lb" href="images/fit.png"><img class="thumb" style="width:100px;" src="images/fit.png"/></a>
<h3><a name="setup"></a>Set Up Your Laptop</h3>
    <h4>Using Virtual Machine (Any OS can do this)</h4>
        <p>Big download but very easy install. This way you don't really have to mess with your system and you
        can throw it away afterward if you don't like it. [<a onclick="$('#vminstall').toggle()">Show</a>]</p>
        <div id="vminstall" style="display:none;" class="setupinst">
        <ol>
            <li>Donwload and install <a href="https://www.virtualbox.org/wiki/Downloads">Virtualbox</a> and <a href="https://www.virtualbox.org/wiki/Downloads">Virtualbox Extension pack</a> which can be found on the same page.
            </li>
            <li>Download our <a href="https://docs.google.com/open?id=0B9P62oMU0LcpLTNDNi1LcjhlZG8">Virtual Appliance</a>(~1 GB). It's pretty big (~3-4 GB) after decompression. It's Ubuntu 12.04 with everything we need for this tutorial installed.</li>
            <li>Open your virtualbox. Click [File]...[Import Appliance] and choose OVA file you just downloaded, or simple double click the OVA file from your host machine.
                <ul><li>
                <strong>Check reinitialize MAC address</strong> or else SLAC network might get confused.
                If you forgot to do this, go to [Setting]...[Network]..[Advance] and regenerate the MAC address.</li>
                </ul>
            </li>
            <li>
                You will see <strong>pythontutorial</strong> virtual machine show up on the list. Just double click it. You will boot into Ubuntu desktop.
                <ul>
                    <li>If it complains about USB driver etc., you can fix it by dowload
                        <a href="https://www.virtualbox.org/wiki/Downloads">Virtualbox Extension Pack</a> OR [Setting]...[Ports]...[USB] and uncheck Enable USB Controller.</li>
                </ul>
            </li>
            <li>There is a working version of tutorial at <code>~/babar_python_tutorial</code>. Open a Terminal. There is a terminal icon on the left hand side. (If you dont't find the Terminal icon, click the top-left Ubuntu "Dash Home" button and type terminal to search the app). Then follow the steps in <a href="#TestItOut">Test it out</a> section below (skipping <code> git clone ...</code>, but you may need to <code>git pull</code>. See that section for detail).</li>
        </ol>
        </div>
    <h4>Ubuntu</h4>
        <p>I did this one freshly installed 12.04. [<a onclick="$('#ubuntuinstall').toggle()">Show</a>]</p>
        <div id="ubuntuinstall" style="display:none;" class="setupinst">
        <pre>sudo apt-get install git subversion build-essential dpkg-dev make g++ gcc gfortran binutils libx11-dev libxpm-dev libxft-dev libxext-dev libpcre3-dev libfftw3.dev python-dev libpng-dev libblas-dev liblapack-dev t1-xfree86-nonfree ttf-xfree86-nonfree ttf-xfree86-nonfree-syriac xfonts-75dpi xfonts-100dpi

cd /usr/local/src
#or grab the latest one from their website
sudo wget ftp://root.cern.ch/root/root_v5.34.03.source.tar.gz
sudo tar xvf root_v5.34.03.source.tar.gz
cd root
sudo ./configure --prefix=/usr/local
sudo make
sudo make install

#make sure your system knows how to load root dynamic lib
sudo echo /usr/local/lib/root | sudo tee /etc/ld.so.conf.d/cern-root.conf
sudo ldconfig

sudo apt-get install python-setuptools python-pip

sudo pip install numpy
sudo pip install scipy

sudo pip install --upgrade  tornado pyzmq ipython matplotlib scikit-learn root_numpy iminuit probfit cython</pre>
        </div>
    <h4>Mac OSX</h4>
        <p>Please report if it works or not.
            I do not have a clean mac to try out.[<a onclick="$('#macinstall').toggle()">Show</a>]</p>
        <div id="macinstall" style="display:none;" class="setupinst">
        <ol>
            <li><strong>Install Python 2.7.x (Not 3.x)</strong>.
                <ol>
                    <li>You may have this install already try typing <code>python --version</code>. It should
                    say something like Python 2.7.1. If you have anything older than 2.7.x then you will
                    need to reinstall it.</li>
                    <li>If you have older version, download it form <a href="http://www.python.org/ftp/python/2.7.3/python-2.7.3-macosx10.6.dmg"> here</a>.</li>
                </ol>
            </li>
            <li><strong>Install fortran compiler</strong> If you don't have one already.
                <ol>
                    <li>Try <code>gfortran --version</code></li>
                    <li>Download them <a href="http://gcc.gnu.org/wiki/GFortranBinaries#MacOS">10.6, 10.7</a> and for <a href="http://hpc.sourceforge.net/">10.8</a></li>
                    <li><a href="http://mxcl.github.com/homebrew/">brew</a> and <a href="http://www.macports.org/">macports</a> also offer their corresponding gfortran.</li>
                </ol>
            </li>
            <li><strong>Install ROOT.</strong>
                <ol>
                    <li>You may have this installed already. Try typing
                    <code>root</code> and <br/><code>root-config --incdir --libdir</code>
                    If you they both give you something sensible then good.</li>

                    <li>If you don't have one <a href="http://root.cern.ch/drupal/content/downloading-root">install</a> it.</li>
                </ol>
            </li>
            <li><strong>Install pip.</strong>
                <ol>
                    <li>You may have it already try <code>pip --version</code></li>
                    <li>If not, <code>easy_install --upgrade pip</code></li>
                </ol>
            </li>

            <li><strong>Install Various Python Packages</strong>
                You can do all this with three simple steps.
                <pre>pip install --upgrade numpy</pre>
                <pre>pip install --upgrade scipy</pre>
                <pre>pip install --upgrade ipython  matplotlib tornado pyzmq scikit-learn root_numpy iminuit probfit</pre>
                In case you need individual package[<a onclick="$('.macpythonpackage').toggle();">Show</a>]
                <div class='macpythonpackage' style="display: none">
                <ol>
                    <li><strong>Install IPython.</strong>
                        <ol>
                            <li>You may have it already try <code>ipython --version</code>. It should say 0.13</li>
                            <li>Otherwise <code>pip install ipython</code></li>
                            <li>You should be able to type <code>ipython --version</code></li>
                        </ol>
                    </li>
                    <li><strong>Install tornado</strong>
                        <ol>
                            <li>Try <code>python -c "import tornado; print tornado.version"</code></li>
                            <li><code>pip install tornado</code> if you don't have one</li>
                        </ol>
                    </li>
                    <li><strong>PyZmq</strong>
                        <ol>
                            <li>Try <code>python -c "import zmq; print zmq.__version__"</code></li>
                            <li><code>pip install pyzmq</code> if you don't have one</li>
                        </ol>
                    </li>
                    <li><strong>numpy</strong>
                        <ol>
                            <li>Try <code>python -c "import numpy; print numpy.__version__"</code></li>
                            <li><code>pip install numpy</code></li>
                        </ol>
                    </li>
                    <li><strong>matplotlib</strong>
                        <ol>
                            <li>Try <code>python -c "import matplotlib; print matplotlib.__version__"</code></li>
                            <li><code>pip install matplotlib</code></li>
                        </ol>
                    </li>
                    <li><strong>scipy</strong>
                        <ol>
                            <li>Try <code>python -c "import scipy; print scipy.__version__"</code></li>
                            <li><code>pip install scipy</code></li>
                        </ol>
                    </li>
                    <li><strong>scikit-learn</strong>
                        <ol>
                            <li>Try <code>python -c "import sklearn; print sklearn.__version__"</code></li>
                            <li><code>pip install scikit-learn</code></li>
                        </ol>
                    </li>
                    <li><strong>root_numpy</strong>
                        <ol>
                            <li>Try <code>python -c "import root_numpy; print root_numpy.__version__"</code></li>
                            <li><code>pip install root_numpy</code></li>
                        </ol>
                    </li>
                    <li><strong>iminuit</strong>
                        <ol>
                            <li>Try <code>python -c "import iminuit; print iminuit.__version__"</code></li>
                            <li><code>pip install iminuit</code></li>
                        </ol>
                    </li>
                    <li><strong>probfit</strong>
                        <ol>
                            <li>Try <code>python -c "import probfit; print probfit.__version__"</code></li>
                            <li><code>pip install probfit</code></li>
                        </ol>
                    </li>
                </ol>
                </div>
            </li>
        </ol>
        </div>
        <h4><a name="TestItOut"></a>Test it out</h4>
            After you have setup your computer. You can test it out.
            <ol>
                <li>Download our entire tutorial project.[ <a href="https://github.com/piti118/babar_python_tutorial/zipball/master">zip</a>|
              <a href="https://github.com/piti118/babar_python_tutorial/tarball/master">tar.gz</a>].
                Or
                <pre>git clone git://github.com/piti118/babar_python_tutorial.git</pre>
		from your terminal.
                <ul>
                            <li>
          If you have cloned it before but want to get the latest version, go to the directory<br>
          <code>cd ~/babar_python_tutorial/</code>, then
                  <pre>git pull</pre>
        </li>
                </ul>
                </li>

                <li>
                    <code>cd</code> to <code>~/babar_python_tutorial/notebooks</code> directory.
                </li>
                <li>
                    You should be able to type<br>
                    <pre>ipython notebook --pylab=inline --script</pre>
                    and a browser should pop up. You will be using this a lot.
                    I alias mine to
                    <pre>alias ipylabnb='ipython notebook --pylab=inline --script'</pre>
                </li>
                <li>
                    You will see 5 notebook choices. You should be able to
                    play with any of those. To go through each cell, just press
                    <code>Shift+Enter</code>.
                </li>
            </li>
            </ol>
    </section>
</div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p>Better Analysis Workflow with [I]Python maintained by <a href="https://github.com/piti118">piti118</a></p>
        <!--<p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>-->
      </footer>
    </div>
<script type="text/javascript">
$(function() {
    $('a.lb').lightBox(); // Select all links with lightbox class
});
</script>
  </body>
</html>
